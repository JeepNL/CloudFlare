@page "/"
<PageTitle>@pageTitle</PageTitle>
<HeadContent><meta name="description" content="@pageDesc" /></HeadContent>

<MudText Typo="Typo.h4">Blazor Is The Future!</MudText>
<MudText Class="mb-6" Typo="Typo.subtitle1">And the future is now!</MudText>

@if (!string.IsNullOrEmpty(userName))
{
    <MudText Class="mt-4 mb-2" Typo="Typo.body2"><b>Hello @userName!</b></MudText>
}

<MudGrid>
    <MudItem xs="12" xl="11">
        <MudPaper Elevation="2" Class="mt-4 pa-2">
            <img src="/images/dotNETDropMic.webp" width="140" align="right" style="margin-left: 0.5em" />
            <MudText Typo="Typo.h5" Class="pa-2">About BlazorBits: privacy first, mobile second ...</MudText>
            <MudText Typo="Typo.body1" Class="pa-2">
                This is an <MudLink Href="https://devblogs.microsoft.com/dotnet/asp-net-core-updates-in-dotnet-7-preview-3/" Target="_blank">ASP.NET Core 7 Preview 3</MudLink>
                <i>(April 12, 2022)</i> Mobile Friendly <MudLink Href="https://blazor.net/" Target="_blank">Blazor</MudLink> WebAssembly <i>(WASM)</i> Single Page
                Application <i>(SPA)</i> prototype using <MudLink Href="https://mudblazor.com/" Target="_blank">MudBlazor</MudLink> Components and the static part, the
                front-end <i>(client side)</i>, is hosted <i>(for free!)</i> on <MudLink Href="https://pages.cloudflare.com/" Target="_blank">Cloudflare Pages</MudLink>.
                The website is using remote <MudLink Href="https://docs.microsoft.com/en-us/aspnet/core/grpc/" Target="_blank">.NET gRPC Services</MudLink> running on a
                co-located <MudLink Href="https://www.transip.eu/vps/bladevps/" Target="_blank">TransIp/X4</MudLink> Ubuntu 20.04 Virtual Private Server <i>(VPS)</i> for its
                dynamic data from a remote SQLite database and for authorization & authentication <i>(register & login)</i>. You can find the client side source on
                <MudLink Href="https://github.com/JeepNL/CloudFlare" Target="_blank">GitHub</MudLink>. Oh, I almost forgot, light and dark themes are also supported and
                when you register, the email you'll receive to verify your email address passes SPF/DKIM/DMARC validations. Free SSL certificate for the back-end server
                provided by <MudLink Href="https://letsencrypt.org/" Target="_blank">Let's Encrypt</MudLink>. Last but not least: BlazorBits doesn't use any tracking cookies!
            </MudText>
        </MudPaper>

        <MudAlert Elevation="2" Severity="Severity.Warning" Variant="Variant.Text" Icon="@Icons.Material.Outlined.TextSnippet" Class="mt-6">
            <MudText Typo="Typo.body1">
                <MudTooltip Text="Niels Swimberghe on Twitter"><MudLink Href="https://twitter.com/RealSwimburger" Target="_blank" Typo="Typo.body1">Niels Swimberghe</MudLink></MudTooltip> wrote a great
                <MudTooltip Text="RTFB 😉"><MudLink Href="https://swimburger.net/blog/dotnet/how-to-deploy-blazor-webassembly-to-cloudflare-pages" Target="_blank" Typo="Typo.body1">blog post</MudLink></MudTooltip> on
                how to deploy your Blazor WebAssembly app to Cloudflare Pages.
            </MudText>
        </MudAlert>

        <MudPaper Elevation="2" Class="mt-6 px-4 py-2">
            <MudText Typo="Typo.body1">To use the latest .NET 7.0.0 Preview 3 SDK on Cloudflare Pages you'll need to modify the build command:</MudText>
            <MudAlert Class="my-2" Elevation="0" Severity="Severity.Info" Variant="Variant.Filled" NoIcon="false">
                <samp>wget https://download.visualstudio.microsoft.com/download/pr/321f886a-a492-464b-ad17-fecffe104e89/3bbe923e17358e096c5e7aed8a2b2da2/dotnet-sdk-7.0.100-preview.3.22179.4-linux-x64.tar.gz;tar zxf dotnet-sdk-7.0.100-preview.3.22179.4-linux-x64.tar.gz;rm dotnet-sdk-7.0.100-preview.3.22179.4-linux-x64.tar.gz;./dotnet workload install wasm-tools;ls -la;./dotnet --info;./dotnet publish CloudFlare.sln -r linux-x64 -c Release -o output --self-contained;</samp>
            </MudAlert>
            <MudText Typo="Typo.body1">For <samp><b>wasm-tools</b></samp> to work you'll need to set the environment variable <samp><b>PYTHON_VERSION</b></samp> to <samp><b>3.7</b></samp> in Cloudflare Pages settings.</MudText>
        </MudPaper>
    </MudItem>

    <MudItem>
        <MudText Typo="Typo.h5">Books you want, you need, you really can't live without 😉</MudText>
        <MudText Typo="Typo.body1"><i>I do like to promote stuff I love!</i></MudText>
    </MudItem>

    <MudItem xs="12" md="12" Class="d-flex flex-wrap">
        <MudItem Class="d-flex flex-wrap mr-4 mb-4">
            <MudLink Href="https://www.manning.com/books/blazor-in-action" Target="_blank"><img src="/images/Sainty-Blazor-MEAP.webp" width="360" height="451" /></MudLink>
            <MudCard Elevation=0 Class="ma-0 pa-0" Style="height: 451px;">
                <MudCardContent Class="pa-4 ma-0" Style="width:360px;">
                    <MudText Typo="Typo.h6" Class="my-0">Blazor In Action (MEAP)</MudText>
                    <MudButton Class="ma-0 pa-0" Link="https://twitter.com/Chris_Sainty" Target="_blank"
                               Variant="Variant.Text" EndIcon="@Icons.Custom.Brands.Twitter" Color="Color.Primary"
                               Style="text-transform:none">Chris Sainty</MudButton>
                    <MudText Typo="Typo.body1" Class="my-3">An example-driven guide to building reusable UI components and web frontends - all with Blazor, C#, and .NET.</MudText>
                    <MudText Typo="Typo.body2" Class="mb-0">
                        Blazor, a powerful C#-based frontend framework from Microsoft, makes it easy to create fast rich web applications without
                        the limitations of typical JavaScript-based tools. Blazor components seamlessly blend C# and standard HTML markup, so you can build web frontends
                        using the same technology as your server-side code. With Blazor WebAssembly, you can also run your C# code natively in the browser.
                    </MudText>
                </MudCardContent>
                <MudCardActions Class="pa-0 ma-0">
                    <MudLink Typo="Typo.subtitle1" Class="ml-4 my-0" Color="Color.Primary" Href="https://www.manning.com/books/blazor-in-action" Target="_blank">More info ...</MudLink>
                </MudCardActions>
            </MudCard>
        </MudItem>

        <MudItem Class="d-flex flex-wrap mb-4">
            <MudLink Href="https://www.manning.com/books/entity-framework-core-in-action-second-edition" Target="_blank"><img src="/images/Smith-EFC-2ed-HI.webp" width="360" height="451" /></MudLink>
            <MudCard Elevation=0 Class="mr-4 pa-0" Style="height: 451px;">
                <MudCardContent Class="pa-4 ma-0" Style="width:360px;">
                    <MudText Typo="Typo.h6" Class="my-0">Entity Framework Core in Action, Second Edition</MudText>
                    <MudButton Class="ma-0 pa-0" Link="https://twitter.com/thereformedprog" Target="_blank"
                               Variant="Variant.Text" EndIcon="@Icons.Custom.Brands.Twitter" Color="Color.Primary"
                               Style="text-transform:none">Jon P Smith</MudButton>
                    <MudText Typo="Typo.body1" Class="my-3">Entity Framework Core in Action, Second Edition is an in-depth guide to reading and writing databases with EF Core.</MudText>
                    <MudText Typo="Typo.body2" Class="mb-0">
                        Revised from the bestselling original edition, it’s filled with over 100 diagrams, code snippets, and examples—including building and scaling your
                        own bookselling web application. Learn from author Jon Smith’s extensive experience working with EF Core in production, as you discover time-saving
                        patterns and best practices for security, performance tuning, and unit testing. All of the book’s code is available on GitHub.
                    </MudText>
                </MudCardContent>
                <MudCardActions Class="pa-0 ma-0">
                    <MudLink Typo="Typo.subtitle1" Class="ml-4 mt-0" Color="Color.Primary" Href="https://www.manning.com/books/entity-framework-core-in-action-second-edition" Target="_blank">More info ...</MudLink>
                </MudCardActions>
            </MudCard>
        </MudItem>

        <MudItem Class="d-flex flex-wrap mb-4">
            <MudLink Href="https://www.oreilly.com/library/view/c-cookbook/9781492093688/" Target="_blank"><img src="/images/Mayo-CSharp-Cookbook.webp" width="360" height="451" /></MudLink>
            <MudCard Elevation=0 Class="mr-4 pa-0" Style="height: 451px;">
                <MudCardContent Class="pa-4 ma-0" Style="width:360px;">
                    <MudText Typo="Typo.h6" Class="my-0">C# Cookbook: Modern Recipes for Professional Developers</MudText>
                    <MudButton Class="ma-0 pa-0" Link="https://twitter.com/JoeMayo" Target="_blank"
                               Variant="Variant.Text" EndIcon="@Icons.Custom.Brands.Twitter" Color="Color.Primary"
                               Style="text-transform:none">Joe Mayo</MudButton>
                    <MudText Typo="Typo.body1" Class="my-3">Even if you're familiar with C# syntax, knowing how to combine various language features is a critical skill when you're building applications.</MudText>
                    <MudText Typo="Typo.body2" Class="mb-0">
                        This cookbook is packed full of recipes to help you solve issues for C# programming tasks you're likely to encounter. You'll learn tried-and-true
                        techniques to help you achieve greater productivity and improve the quality of your code. Author and independent consultant Joe Mayo shares some of
                        the most important practices you'll need to be successful as a C# developer.
                    </MudText>
                </MudCardContent>
                <MudCardActions Class="pa-0 ma-0">
                    <MudLink Typo="Typo.subtitle1" Class="ml-4 mt-0" Color="Color.Primary" Href="https://www.oreilly.com/library/view/c-cookbook/9781492093688/" Target="_blank">More info ...</MudLink>
                </MudCardActions>
            </MudCard>
        </MudItem>

        <MudItem Class="d-flex flex-wrap mb-4">
            <MudLink Href="https://www.wiley.com/en-us/Professional+C%23+and+NET%2C+2021+Edition-p-9781119797210" Target="_blank"><img src="/images/Nagel-CSharp-2021.webp" width="360" height="451" /></MudLink>
            <MudCard Elevation=0 Class="mr-4 pa-0" Style="height: 451px;">
                <MudCardContent Class="pa-4 ma-0" Style="width:360px;">
                    <MudText Typo="Typo.h6" Class="my-0">Professional C# and .NET – 2021 Edition</MudText>
                    <MudButton Class="ma-0 pa-0" Link="https://twitter.com/christiannagel" Target="_blank"
                               Variant="Variant.Text" EndIcon="@Icons.Custom.Brands.Twitter" Color="Color.Primary"
                               Style="text-transform:none">Christian Nagel</MudButton>
                    <MudText Typo="Typo.body1" Class="my-3">The new edition of my book is available – covering .NET, C#, WinUI, ASP.NET Core, EF Core, and more!</MudText>
                    <MudText Typo="Typo.body2" Class="mb-0">
                        Compared to the previous edition, it not only covers the newest editions of C# and .NET, you don’t have to carry a book with 1500 pages – the number
                        of pages have been reduced – but I made sure that all the important topics are covered, you shouldn’t miss anything important topics needed to develop
                        applications with .NET, C#, and Microsoft Azure.
                    </MudText>
                </MudCardContent>
                <MudCardActions Class="pa-0 ma-0">
                    <MudLink Typo="Typo.subtitle1" Class="ml-4 mt-0" Color="Color.Primary" Href="https://www.wiley.com/en-us/Professional+C%23+and+NET%2C+2021+Edition-p-9781119797210" Target="_blank">More info ...</MudLink>
                </MudCardActions>
            </MudCard>
        </MudItem>

    </MudItem>
</MudGrid>

@code {
    [CascadingParameter]
    protected UserStateModel UserStateModel { get; set; }

    private string pageTitle = "Home | BlazorBits";
    private string pageDesc = "General information about this BlazorBits WASM Prototype hosted for free on Cloudflare Pages. Blazor is the future, and the future is now!";
    private string userName = string.Empty;

    protected override void OnParametersSet()
    {
        userName = UserStateModel.FirstName;
        if (string.IsNullOrEmpty(userName))
        {
            userName = AbbrEmail(UserStateModel.Email);
            if (userName.IndexOf("@") >= 1)
                userName = userName.Substring(0, userName.IndexOf("@"));
        }
    }

    private string AbbrEmail(string input)
    {
        if (input.IndexOf("@") >= 1)
            input = input.Substring(0, input.IndexOf("@"));
        return input;
    }
}
